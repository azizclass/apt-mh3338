{% extends "views/baseui.html" %}
{% set active_page = "view" %}
{% block meta %}
<meta property="og:url" content="http://mh33338-connexus.appspot.com/view?stream_name={{ stream.name }}&cursor={{ cursor }}" />
<meta property="og:type"          content="website" />
<meta property="og:title"         content="Connexus - mh33338" />
<meta property="og:description"   content="{{ stream.name }}" />
<meta property="og:image" content="{{ stream.cover_image_url }}" />
{% endblock %}
{% block content %}
<br/>
<div class="row">
    {% for image in stream.images[cursor:cursor+3] %}
    <div class="col-lg-3">
        <div class="thumbnail">
            <img src="{{ image.url }}" 
            class="img-responsive">
        </div>
    </div>
    {% endfor %}
    <div class="col-lg-3">
        {% if cursor + 3 < stream.images | length %}
        <a href="/view?stream_name={{ stream.name }}&cursor={{ cursor + 3 }}">
            <button type="submit" class="btn btn-default more-pics">More Pictures</button>
        </a>
        {% endif %}
    </div>
</div>
<br/>
<div class="row">
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-body">
                <form action="{{ upload_url }}" method="POST" 
                    enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-lg-3">
                            <span class="btn btn-default btn-file">
                                File name<input type="file" name="file">
                            </span>
                        </div>
                        <div class="col-lg-7 col-md-offset-1">
                            <input type="text" class="form-control"
                            name="comments" placeholder="Comments"/> 
                        </div>
                    </div>
                    <br/>
                    <div class="row">
                        <div class="col-lg-4">
                            <input type="hidden" name="stream_name"
                            value="{{ stream.name}}">
                            <button type="submit" name="submit" value="Submit" 
                                class="btn btn-default">Upload file</button>
                        </div>
                        <div class="col-lg-8">
                            <h2>Add an image</h2>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '1643724112547639',
                xfbml      : true,
                version    : 'v2.4'
            });
        };
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <div class="fb-share-button" data-href="http://mh33338-connexus.appspot.com/view?stream_name={{ stream.name }}&cursor={{ cursor }}"
        data-layout="box_count">
    </div>
</div>
{% endblock %}
